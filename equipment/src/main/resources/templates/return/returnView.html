<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"> <!--thymeleafの宣言-->

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" th:href="@{css/returnLayout.css}">
	<link rel="stylesheet" th:href="@{/css/common.css}">
	<title>返却</title>
</head>

<body class="body">
	<div th:replace="~{common/layout :: header}"></div>
	<h2 class="title">備品返却画面</h2>
	<br>
	<!-- 備品の名前を表示させる -->
	<h2 th:text="${detailName.equipmentName}"></h2>

	<!-- エラーメッセージ表示 -->
	<div class="fc_red" th:text="${errorMessage}"></div>

	<!-- 返却成功メッセージ表示 -->
	<h4 class="success-message" th:if="${updateMessage}" th:text="${updateMessage}"></h4>

	<!-- ボタンを押下した時にコントローラの/returnProcessが呼び出し -->
	<!-- th:ifでデータが存在しない場合テーブルと返却ボタンが表示されないようにする -->
	<div class="table-area">
		<div class="table-wrapper">
			<!-- 返却用フォーム -->
			<form id="returnForm" th:action="@{/returnProcess}" method="post"
				th:if="${itemDetail != null and !#lists.isEmpty(itemDetail)}">

				<!-- 備品名をhiddenで送信 -->
				<input type="hidden" name="name" th:value="${detailName.equipmentName}">

				<table border="1" class="borrow-table">
					<colgroup>
						<col class="col-serial">
						<col class="col-user">
						<col class="col-start">
						<col class="col-limit">
						<col class="col-remarks">
						<col class="col-check">
					</colgroup>

					<tr class="front_label_color">
						<th class="col-serial">シリアルナンバー</th>
						<th>使用者</th>
						<th>貸出開始日</th>
						<th>返却予定日</th>
						<th>備考</th>
						<th>返却</th>
					</tr>

					<!-- 備品リスト表示 -->
					<tr th:each="item : ${itemDetail}">
						<td class="col-serial" th:text="${item.parentStockCode}"></td>
						<td class="col-user" th:text="${item.staffName}"></td>
						<td class="col-start" th:text="${item.startDate}"></td>
						<td class="col-limit" th:text="${item.limitDate}"></td>
						<td class="col-remarks">
							<div class="scroll-inner">
								<p th:text="${item.remarks}"></p>
							</div>
						</td>
						<td class="col-check">
							<input type="checkbox" name="equipmentIdList" th:value="${item.equipmentId}">
						</td>
					</tr>
				</table>
			</form>
		</div>

		<!-- 貸出中の備品がないとき -->
		<h4 class="no-data" th:if="${itemDetail == null or #lists.isEmpty(itemDetail)}">
			貸出中の備品はありません
		</h4>

		<!-- テーブル下のボタン -->
		<div class="table-buttons">
			<button class="returnButton" type="submit" form="returnForm"
				th:if="${itemDetail != null and !#lists.isEmpty(itemDetail)}">返却</button>

			<!-- 戻るボタン -->
			<form th:action="@{/detailBack}" method="get">
				<input type="hidden" name="name" th:value="${detailName.equipmentName}">
				<button class="returnToTopButton" type="submit">戻る</button>
			</form>
		</div>
	</div>
</body>

</html>